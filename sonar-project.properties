# SonarQube project configuration for Katya
# https://docs.sonarsource.com/sonarqube/latest/analyzing-source-code/scanners/sonarscanner/

# Project identification
sonar.projectKey=katya-rechain:katya
sonar.projectName=Katya
sonar.projectVersion=1.0.0

# Source code location
sonar.sources=lib
sonar.tests=test
sonar.exclusions=**/*.g.dart,**/*.freezed.dart,**/*.config.dart,**/generated/**

# Test coverage
sonar.dart.coverage.reportPath=coverage/lcov.info
sonar.coverage.exclusions=**/*.g.dart,**/*.freezed.dart,**/*.config.dart,**/generated/**

# Language-specific settings
sonar.language=dart

# Encoding
sonar.sourceEncoding=UTF-8

# Test settings
sonar.test.inclusions=**/*test*.dart,**/*spec*.dart
sonar.test.exclusions=**/integration_test/**

# Code analysis settings
sonar.dart.analysis.mode=issues

# Quality gate settings
sonar.qualitygate.wait=true

# Additional settings for Flutter projects
sonar.flutter.enabled=true
sonar.flutter.mainFile=lib/main.dart

# Security hotspots
sonar.security.config.cwe.mappings=cwe-79:Cross-site Scripting,cwe-89:SQL Injection,cwe-352:Cross-Site Request Forgery

# Custom rules
sonar.dart.analysis.customRules.enabled=true

# Exclusions for generated code
sonar.coverage.exclusions=**/*.g.dart,\
  **/*.freezed.dart,\
  **/*.config.dart,\
  **/generated/**,\
  **/build/**,\
  **/.dart_tool/**,\
  **/android/**,\
  **/ios/**,\
  **/web/**,\
  **/windows/**,\
  **/linux/**,\
  **/macos/**

# Test coverage exclusions
sonar.coverage.exclusions+=**/test/**,\
  **/integration_test/**,\
  **/test_driver/**

# Complexity settings
sonar.density.threshold=70
sonar.complexity.cognitive.threshold=15
sonar.complexity.cyclomatic.threshold=10

# Duplication settings
sonar.cpd.dart.minimumLines=10
sonar.cpd.dart.minimumTokens=50

# Issue exclusions
sonar.issue.ignore.multicriteria=e1,e2,e3

# Ignore issues in generated files
sonar.issue.ignore.multicriteria.e1.ruleKey=dart:S1068
sonar.issue.ignore.multicriteria.e1.resourceKey=**/*.g.dart

# Ignore issues in test files
sonar.issue.ignore.multicriteria.e2.ruleKey=dart:S2699
sonar.issue.ignore.multicriteria.e2.resourceKey=**/test/**

# Ignore issues in mock files
sonar.issue.ignore.multicriteria.e3.ruleKey=dart:S101
sonar.issue.ignore.multicriteria.e3.resourceKey=**/mocks/**

# Custom quality profiles
sonar.qualityProfiles=dart:katya-dart-profile

# Branch analysis
sonar.branch.name=${env.GITHUB_HEAD_REF:-${env.GITHUB_REF_NAME}}
sonar.branch.target=${env.GITHUB_BASE_REF:-main}

# Pull request analysis
sonar.pullrequest.key=${env.GITHUB_EVENT_NUMBER}
sonar.pullrequest.branch=${env.GITHUB_HEAD_REF}
sonar.pullrequest.base=${env.GITHUB_BASE_REF}
sonar.pullrequest.github.repository=${env.GITHUB_REPOSITORY}

# Webhook settings
sonar.webhooks.project=katya-rechain/katya
sonar.webhooks.global=${env.SONAR_WEBHOOK_URL}

# Database settings (if using SonarQube database)
sonar.jdbc.url=${env.SONAR_JDBC_URL}
sonar.jdbc.username=${env.SONAR_JDBC_USERNAME}
sonar.jdbc.password=${env.SONAR_JDBC_PASSWORD}

# External issue tracker integration
sonar.links.homepage=https://katya.rechain.network
sonar.links.ci=https://github.com/katya-rechain/katya/actions
sonar.links.issue=https://github.com/katya-rechain/katya/issues
sonar.links.scm=https://github.com/katya-rechain/katya

# SCM integration
sonar.scm.provider=git
sonar.scm.exclusions.disabled=true

# Analysis scope
sonar.analysis.scope=ALL
sonar.analysis.mode=publish

# Performance settings
sonar.analysis.timeout=300
sonar.ce.task.timeout=300

# Cache settings
sonar.cache.enabled=true
sonar.cache.baseUrl=${env.SONAR_CACHE_URL}

# Notifications
sonar.notifications.enabled=true
sonar.notifications.email.enabled=${env.SONAR_EMAIL_ENABLED:-false}
sonar.notifications.email.recipients=${env.SONAR_EMAIL_RECIPIENTS}

# Third-party integrations
sonar.github.repository=katya-rechain/katya
sonar.github.oauth=${env.GITHUB_TOKEN}

# Azure DevOps integration (if applicable)
sonar.azdo.project=${env.SONAR_AZDO_PROJECT}
sonar.azdo.repository=${env.SONAR_AZDO_REPOSITORY}

# Jira integration (if applicable)
sonar.jira.url=${env.SONAR_JIRA_URL}
sonar.jira.project.key=${env.SONAR_JIRA_PROJECT_KEY}

# Slack integration (if applicable)
sonar.slack.channels=${env.SONAR_SLACK_CHANNELS}
sonar.slack.webhook.url=${env.SONAR_SLACK_WEBHOOK_URL}

# Custom metrics
sonar.metrics.export.enabled=true
sonar.metrics.export.path=reports/metrics.json

# Dependency analysis
sonar.dependencyCheck.enabled=true
sonar.dependencyCheck.reportPath=reports/dependency-check-report.html
sonar.dependencyCheck.htmlReportPath=reports/dependency-check-report.html
sonar.dependencyCheck.jsonReportPath=reports/dependency-check-report.json

# OWASP Dependency Check integration
sonar.owasp.enabled=true
sonar.owasp.reportPath=reports/owasp-dependency-check-report.html

# License analysis
sonar.license.enabled=true
sonar.license.reportPath=reports/licenses.xml

# Custom plugins
sonar.plugins.download.url=${env.SONAR_PLUGINS_URL}

# Analysis properties for specific file types
sonar.dart.file.suffixes=.dart
sonar.python.file.suffixes=.py
sonar.javascript.file.suffixes=.js,.jsx,.ts,.tsx,.mjs
sonar.typescript.file.suffixes=.ts,.tsx
sonar.css.file.suffixes=.css,.scss,.sass,.less
sonar.html.file.suffixes=.html,.htm,.xhtml
sonar.xml.file.suffixes=.xml,.xsd,.xsl,.xslt
sonar.json.file.suffixes=.json
sonar.yaml.file.suffixes=.yaml,.yml
sonar.markdown.file.suffixes=.md,.markdown

# File size limits
sonar.filesize.limit=20
sonar.filesize.warning=10

# Analysis memory settings
sonar.analysis.heap.dump.enabled=true
sonar.analysis.heap.dump.path=reports/heap-dump.hprof

# Debug settings
sonar.verbose=false
sonar.log.level=INFO
sonar.showProfiling=false

# Temporary directory
sonar.working.directory=.sonar

# Project structure
sonar.projectBaseDir=.
sonar.sources=lib,web/lib,packages
sonar.tests=test,integration_test
sonar.testExecutionReportPaths=test-results.xml
sonar.coverageReportPaths=coverage/lcov.info

# Flutter-specific settings
sonar.flutter.pubspec.path=pubspec.yaml
sonar.flutter.build.mode=release
sonar.flutter.target.platform=android,ios,web,windows,linux,macos

# Platform-specific analysis
sonar.android.enabled=true
sonar.android.lint.reportPath=android/build/reports/lint-results.xml
sonar.ios.enabled=true
sonar.ios.xcodebuild.reportPath=ios/build/reports/xcodebuild.json

# Web analysis
sonar.web.enabled=true
sonar.web.lighthouse.reportPath=reports/lighthouse-report.json

# Accessibility analysis
sonar.accessibility.enabled=true
sonar.accessibility.reportPath=reports/accessibility-report.json

# Performance analysis
sonar.performance.enabled=true
sonar.performance.reportPath=reports/performance-report.json

# Security analysis
sonar.security.enabled=true
sonar.security.reportPath=reports/security-report.json
sonar.security.hotspots.review.enabled=true
sonar.security.hotspots.review.status=TO_REVIEW,REVIEWED,FIXED

# Code smell analysis
sonar.smell.enabled=true
sonar.smell.reportPath=reports/code-smell-report.json

# Maintainability analysis
sonar.maintainability.enabled=true
sonar.maintainability.reportPath=reports/maintainability-report.json

# Reliability analysis
sonar.reliability.enabled=true
sonar.reliability.reportPath=reports/reliability-report.json

# Technical debt analysis
sonar.debt.enabled=true
sonar.debt.reportPath=reports/technical-debt-report.json

# Size analysis
sonar.size.enabled=true
sonar.size.reportPath=reports/size-report.json

# Complexity analysis
sonar.complexity.enabled=true
sonar.complexity.reportPath=reports/complexity-report.json

# Duplication analysis
sonar.duplication.enabled=true
sonar.duplication.reportPath=reports/duplication-report.json

# Comment analysis
sonar.comment.enabled=true
sonar.comment.reportPath=reports/comment-report.json

# Custom dashboards
sonar.dashboard.enabled=true
sonar.dashboard.url=${env.SONAR_DASHBOARD_URL}

# Export settings
sonar.export.path=reports/sonar-report.json
sonar.export.format=json,csv,pdf

# Backup settings
sonar.backup.enabled=true
sonar.backup.path=backups/sonar
sonar.backup.schedule=daily

# Monitoring settings
sonar.monitoring.enabled=true
sonar.monitoring.metrics.enabled=true
sonar.monitoring.health.enabled=true

# Alerting settings
sonar.alerting.enabled=true
sonar.alerting.email.enabled=${env.SONAR_ALERTING_EMAIL_ENABLED:-false}
sonar.alerting.slack.enabled=${env.SONAR_ALERTING_SLACK_ENABLED:-false}
sonar.alerting.webhook.enabled=${env.SONAR_ALERTING_WEBHOOK_ENABLED:-false}

# Integration with CI/CD
sonar.build.number=${env.BUILD_NUMBER}
sonar.buildString=${env.BUILD_STRING}
sonar.job.name=${env.JOB_NAME}
sonar.build.project=${env.PROJECT_NAME}

# Environment-specific settings
sonar.environment=${env.SONAR_ENVIRONMENT:-development}
sonar.region=${env.SONAR_REGION:-us-east-1}

# Custom properties for specific analysis
sonar.analysis.properties.path=sonar-analysis.properties

# Plugin-specific settings
sonar.typescript.lcov.reportPaths=coverage/lcov.info
sonar.javascript.lcov.reportPaths=coverage/lcov.info
sonar.python.coverage.reportPaths=coverage.xml
sonar.java.coverage.reportPaths=jacoco.xml
sonar.csharp.coverage.reportPaths=coverage.xml
sonar.php.coverage.reportPaths=clover.xml

# Custom quality gates
sonar.qualitygate=katya-quality-gate

# Analysis scheduling
sonar.analysis.schedule.enabled=false
sonar.analysis.schedule.cron=0 2 * * *

# Data retention
sonar.retention.enabled=true
sonar.retention.duration=365
sonar.retention.unit=days

# Anonymization settings
sonar.anonymize.enabled=true
sonar.anonymize.fields=username,email,name

# Compliance settings
sonar.compliance.enabled=true
sonar.compliance.standards=GDPR,CCPA,SOC2,ISO27001
sonar.compliance.reportPath=reports/compliance-report.json

# Audit settings
sonar.audit.enabled=true
sonar.audit.reportPath=reports/audit-report.json
sonar.audit.retention=2555

# Final settings
sonar.forceUpdate=true
sonar.skipDesign=true
sonar.skipPackageDesign=true
